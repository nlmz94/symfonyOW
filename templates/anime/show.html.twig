{% extends 'base.html.twig' %}

{% block title %}{{ anime.title }}{% endblock %}

{% block body %}
    <a href="{{ path('app_anime') }}" class="btn btn-link p-0 mb-3">&larr; Back to list</a>

    <div class="row g-4">
        <div class="col-12 col-md-4">
            <div class="card">
                {% if anime.imgUrl %}
                    <picture>
                        <source srcset="{{ anime.imgUrl| imagine_filter('poster_webp') }}" type="image/webp">
                        <img src="{{ anime.imgUrl | imagine_filter('poster') }}" class="card-img-top" alt="{{ anime.title }}">
                    </picture>
                {% endif %}
                <div class="card-body">
                    <h1 class="h4 card-title mb-1">{{ anime.title }}</h1>
                    {% if anime.titleEnglish %}<div class="text-muted small">{{ anime.titleEnglish }}</div>{% endif %}
                    <ul class="list-unstyled small mt-3 mb-0">
                        {% if anime.episodes is not null %}<li><strong>Episodes:</strong> {{ anime.episodes }}</li>{% endif %}
                        {% if anime.airing %}<li><strong>Airing:</strong> {{ anime.airing }}</li>{% endif %}
                        {% if anime.aired is not null %}<li><strong>Aired:</strong> {{ anime.aired ? 'Yes' : 'No' }}</li>{% endif %}
                        {% if anime.pegi %}<li><strong>PEGI:</strong> {{ anime.pegi.pegi }}</li>{% endif %}
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-8">
            {% if anime.synopsis %}
                <div class="mb-4">
                    <h2 class="h5">Synopsis</h2>
                    <p class="mb-0">{{ anime.synopsis }}</p>
                </div>
            {% endif %}

            {% if anime.genres|length > 0 %}
                <div class="mb-3">
                    <h3 class="h6 text-uppercase text-muted">Genres</h3>
                    {% for g in anime.genres %}
                        <span class="badge text-bg-secondary me-1 mb-1">{{ g.name }}</span>
                    {% endfor %}
                </div>
            {% endif %}

            {% if anime.producers|length > 0 %}
                <div class="mb-3">
                    <h3 class="h6 text-uppercase text-muted">Producers</h3>
                    {% for p in anime.producers %}
                        <span class="badge text-bg-light border me-1 mb-1">{{ p.name }}</span>
                    {% endfor %}
                </div>
            {% endif %}

            {% if anime.studios|length > 0 %}
                <div class="mb-3">
                    <h3 class="h6 text-uppercase text-muted">Studios</h3>
                    {% for s in anime.studios %}
                        <span class="badge text-bg-light border me-1 mb-1">{{ s.name }}</span>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
